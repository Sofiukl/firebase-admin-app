(this["webpackJsonpfirebase-admin"]=this["webpackJsonpfirebase-admin"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(4),s=n.n(a),i=n(5),o=n.n(i),u=(n(29),n(30),n(3)),l=(n(31),n(32),n(2)),d=n(6),b="Something went wrong. Please try again later.",j=function(e){return e.ok&&200===e.status?e.json():{isSuccess:!1,message:b}},m=function(e){return{isSuccess:!1,message:e.message||b}},h=function(e,t){var n="";t&&(n="".concat(n,"&").concat(Object.keys(t).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&")));var c="".concat("https://young-peak-69168.herokuapp.com","/user/").concat(e);return""===n?c:"".concat(c,"?").concat(n)},f=function(e){var t=Object(d.a)(Object(d.a)({"Content-type":"application/json"},e.token&&{Authorization:e.token}),e.headers);return null===t["Content-type"]&&delete t["Content-type"],Object.keys(t).forEach((function(e){return!t[e]&&delete t[e]})),t},O={onUpdate:function(){return fetch(h("user-list",{}),{method:"GET",headers:f({})}).then((function(e){return j(e)})).catch((function(e){return m(e)}))},create:function(e){return fetch(h("user-create",{}),{method:"POST",headers:f({}),body:JSON.stringify(e)}).then((function(e){return j(e)})).catch((function(e){return m(e)}))},update:function(e,t){return fetch(h("user-update",{}),{method:"POST",headers:f({}),body:JSON.stringify(Object(d.a)({uid:e},t))}).then((function(e){return j(e)})).catch((function(e){return m(e)}))},delete:function(e){return fetch(h("user-delete",{}),{method:"POST",headers:f({}),body:JSON.stringify({uid:e})}).then((function(e){return j(e)})).catch((function(e){return m(e)}))}},p=function(e,t){if("string"===typeof e)switch(t){case"warn":u.b.warn(e,{position:u.b.POSITION.TOP_RIGHT});break;case"success":u.b.success(e,{position:u.b.POSITION.TOP_RIGHT});break;default:u.b.error(e,{position:u.b.POSITION.TOP_RIGHT})}},g=n(0),x={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"20px",minWidth:"600px"}},v=function(e){var t=e.isOpen,n=e.onRequestClose,c=e.children;return Object(g.jsx)(o.a,{isOpen:t,onRequestClose:n,style:x,children:c})},y=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),o=i[0],u=i[1],d=function(){a(""),u(""),e.onClose()};return Object(g.jsx)(v,{isOpen:e.isOpen,onRequestClose:d,children:Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"form-group margin-bottom-30",children:[Object(g.jsx)("label",{htmlFor:"email",className:"margin-right-10",children:"Email"}),Object(g.jsx)("input",{id:"email",value:r,onChange:function(e){return a(e.target.value)},type:"text"})]}),Object(g.jsxs)("div",{className:"form-group margin-bottom-30",children:[Object(g.jsx)("label",{htmlFor:"password",className:"margin-right-10",children:"Password"}),Object(g.jsx)("input",{id:"password",value:o,onChange:function(e){return u(e.target.value)},type:"password"})]}),Object(g.jsxs)("div",{className:"d-flex flex-row-reverse",children:[Object(g.jsx)("button",{onClick:function(){(function(e){var t=e.password,n=e.email;return t&&n?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(n)?!(t.length<6)||(p("Password must be of at least 6 characters"),!1):(p("Wrong Email format"),!1):(p("Email and Password is mandatory"),!1)})({password:o,email:r})&&(a(""),u(""),e.onSave({password:o,email:r}))},className:"p-2 btn btn-primary",type:"button",children:"Save"}),Object(g.jsx)("button",{onClick:d,className:"p-2 btn btn-secondary margin-right-10",type:"button",children:"Cancel"})]})]})})},N=function(e){var t=e.onUserUpdate,n=Object(c.useState)(!1),r=Object(l.a)(n,2),a=r[0],s=r[1],i=function(){return s(!1)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:function(){return s(!0)},className:"btn btn-primary margin-right-10",type:"button",children:"Add user"}),Object(g.jsx)(y,{isOpen:a,onSave:function(e){O.create(e).then((function(){return setTimeout(t,1e3)})).catch((function(e){p(e.message||"")})).finally((function(){return i()}))},onClose:i})]})},w=function(e){var t=Object(c.useState)(e.email||""),n=Object(l.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){a(e.email)}),[e.email]);var s=function(){a(e.email),e.onClose()};return Object(g.jsx)(v,{isOpen:e.isOpen,onRequestClose:s,children:Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"form-group margin-bottom-30",children:Object(g.jsx)("label",{htmlFor:"name",className:"margin-right-10",children:"UID: ".concat(e.uid)})}),Object(g.jsxs)("div",{className:"form-group margin-bottom-30",children:[Object(g.jsx)("label",{htmlFor:"email",className:"margin-right-10",children:"Email"}),Object(g.jsx)("input",{id:"email",value:r,onChange:function(e){return a(e.target.value)},type:"text"})]}),Object(g.jsxs)("div",{className:"d-flex flex-row-reverse",children:[Object(g.jsx)("button",{onClick:function(){(function(e){var t=e.email;return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||(p("Wrong Email format"),!1)})({email:r})&&(a(e.email),e.onSave({email:r}))},className:"p-2 btn btn-primary",type:"button",children:"Save"}),Object(g.jsx)("button",{onClick:s,className:"p-2 btn btn-secondary margin-right-10",type:"button",children:"Cancel"})]})]})})},C=function(e){var t=e.uid,n=e.email,r=e.onUserUpdate,a=Object(c.useState)(!1),s=Object(l.a)(a,2),i=s[0],o=s[1],u=function(){return o(!1)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:function(){return o(!0)},className:"btn btn-secondary",type:"button",children:"Update"}),Object(g.jsx)(w,{isOpen:i,uid:t,email:n,onSave:function(e){O.update(t,e).then((function(){return setTimeout(r,1e3)})).catch((function(e){return p(e.message||"")})).finally((function(){return u()}))},onClose:u})]})},S=function(e){var t=e.uid,n=e.onUserUpdate;return Object(g.jsx)("button",{onClick:function(){O.delete(t).then((function(){return setTimeout(n,1e3)})).catch((function(e){return p(e.message||"")}))},className:"btn btn-danger",type:"button",children:"Delete"})},k=n(13),T=n.n(k),U=function(e){var t=e.data;return Object(g.jsx)(T.a,{data:t.map((function(e){return{uid:e.uid,email:e.email}})),filename:"users.csv",className:"btn btn-success",children:"Download users"})},P=function(){var e=Object(c.useState)(void 0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useCallback)((function(){O.onUpdate().then((function(e){return r(e.data)})).catch((function(e){p(e.message)}))}),[]);Object(c.useEffect)((function(){a()}),[a]);return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"margin-bottom-30",children:[Object(g.jsx)(N,{onUserUpdate:a}),n&&n.length?Object(g.jsx)(U,{data:n}):null]}),Object(g.jsx)("br",{}),void 0===n?Object(g.jsx)("span",{className:"margin-top-30",children:"Loading..."}):0===n.length?Object(g.jsx)("span",{className:"margin-top-30",children:"No records found"}):Object(g.jsxs)("table",{className:"table",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{scope:"col",children:"UID"}),Object(g.jsx)("th",{scope:"col",children:"Email"}),Object(g.jsx)("th",{scope:"col"}),Object(g.jsx)("th",{scope:"col"})]})}),Object(g.jsx)("tbody",{children:n.map((function(e){var t=e.uid,n=e.email;return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:t}),Object(g.jsx)("td",{children:n}),Object(g.jsx)("td",{children:Object(g.jsx)(C,{uid:t,email:n,onUserUpdate:a})}),Object(g.jsx)("td",{children:Object(g.jsx)(S,{uid:t,onUserUpdate:a})})]},t)}))})]})]})};u.b.configure({autoClose:2e3,draggable:!1});var I=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(P,{}),Object(g.jsx)(u.a,{})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},F=document.getElementById("root");s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(I,{})}),F),o.a.setAppElement(F),E()}},[[35,1,2]]]);
//# sourceMappingURL=main.9e07010c.chunk.js.map